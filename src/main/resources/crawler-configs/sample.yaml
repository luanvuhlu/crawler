# Crawler configuration
headless: false
baseUrl: "https://example.com/admin/"
parallelism: 30
login:
  url: "index.php?com=user&act=login"
  usernameSelector: "#username"
  passwordSelector: "#password"
  submitSelector: "button.btn.btn-default.btn-block"
  usernameEnv: "EXAMPLE_USERNAME"
  passwordEnv: "EXAMPLE_PASSWORD"
  loggedInCheckSelector: ".dropdown.userinfo"
  timeoutMs: 20000
rateLimit:
  permitsPerSecond: 1
  burst: 2
retries:
  maxAttempts: 3
  backoffMs: 1000
  maxBackoffMs: 8000
  reloginOnFail: true
output:
  dir: "data"
  json: true
  csv: false
crawlers:
  - id: "productList"
    type: "list"
    url: "index.php?com=product&act=man&type=san-pham"
    rootSelector: "#dyntable_wrapper"
    properties:
      startPage: 23
      itemSelectors: "tbody tr"
      detailLinkSelector: "td:nth-child(5) a"
      crawlId: "productDetail"
      uniqueKey: "ID"
      nextSelector: ".pagination a.active + a"
      currentPageSelector: ".pagination a.active"
    fields:
      - id: "id"
        name: "ID"
        selector: "input[name='stt[id][]']"
        type: "text"
      - id: "stt"
        name: "stt"
        selector: "td:nth-child(3) .update_stt"
        type: "text"
      - id: "avatar"
        name: "Hình đại diện"
        selector: "td:nth-child(4) img"
        type: "image"
      - id: "title"
        name: "Tiêu đề"
        selector: "td:nth-child(5) a"
        type: "text"
      - id: "banChay"
        name: "Bán chạy"
        selector: "td:nth-child(7) a"
        type: "boolean"
        values:
          - name: "Có"
            value: "span.iconfa-ok-circle"
          - name: "Không"
            value: "span.iconfa-ban-circle"
      - id: "noiBatDanhMuc"
        name: "Nổi bật danh mục"
        selector: "td:nth-child(8) a"
        type: "boolean"
        values:
          - name: "Có"
            value: "span.iconfa-ok-circle"
          - name: "Không"
            value: "span.iconfa-ban-circle"
      - id: "noiBat"
        name: "Nổi bật"
        selector: "td:nth-child(9) a"
        type: "boolean"
        values:
          - name: "Có"
            value: "span.iconfa-ok-circle"
          - name: "Không"
            value: "span.iconfa-ban-circle"
      - id: "hienThi"
        name: "Hiển thị"
        selector: "td:nth-child(10) a"
        type: "boolean"
        values:
          - name: "Có"
            value: "span.iconfa-ok-circle"
          - name: "Không"
            value: "span.iconfa-ban-circle"
  - id: "productDetail"
    type: "detail"
    rootSelector: "form[name='frm']"
    fields:
      - id: "danhMucCap1"
        name: "Danh mục cấp 1"
        selector: "> :nth-child(1) select"
        type: "select"
      - id: "danhMucCap2"
        name: "Danh mục cấp 2"
        selector: "> :nth-child(2) select"
        type: "select"
      - id: "danhMucCap3"
        name: "Danh mục cấp 3"
        selector: "> :nth-child(3) select"
        type: "select"
      - id: "hinhHienTai"
        name: "Hình hiện tại"
        selector: "> :nth-child(4) img"
        type: "image"
      - id: "hinhHoverHienTai"
        name: "Hình hover hiện tại"
        selector: "> :nth-child(6) img"
        type: "image"
      - id: "albumHienTai"
        name: "Album hiện tại"
        selector: "> :nth-child(9) img.img_item_pic"
        type: "image"
        multiple: true
      - id: "giaBan"
        name: "Giá bán"
        selector: "> :nth-child(10) input"
        type: "text"
      - id: "giaMoi"
        name: "Giá mới"
        selector: "> :nth-child(11) input"
        type: "text"
      - id: "ten"
        name: "Tên"
        selector: "> #tabs > #tabs-vi > p:nth-child(1) input"
        type: "text"
      - id: "moTa"
        name: "Mô tả"
        selector: "> #tabs > #tabs-vi > p:nth-child(5) .cke_source"
        type: "html"
        preActions:
          - id: "changeToTextArea"
            script: "document.querySelector('#tabs > #tabs-vi > p:nth-child(5) .cke_button__source_label').click();"
      - id: "noiDung"
        name: "Nội dung"
        selector: "> #tabs > #tabs-vi > p:nth-child(10) .cke_source"
        type: "html"
        preActions:
          - id: "changeToTextArea"
            script: "document.querySelector('#tabs > #tabs-vi > p:nth-child(10) .cke_button__source_label').click();"
      - id: "seoH1"
        name: "SEO H1"
        selector: "> :nth-child(13) textarea"
        type: "text"
      - id: "seoH2"
        name: "SEO H2"
        selector: "> :nth-child(14) textarea"
        type: "text"
      - id: "seoH3"
        name: "SEO H3"
        selector: "> :nth-child(15) textarea"
        type: "text"
      - id: "seoTitle"
        name: "SEO Title"
        selector: "> :nth-child(16) textarea"
        type: "text"
      - id: "seoKeywords"
        name: "SEO Keywords"
        selector: "> :nth-child(17) textarea"
        type: "text"
      - id: "seoDescription"
        name: "SEO Description"
        selector: "> :nth-child(18) textarea"
        type: "text"